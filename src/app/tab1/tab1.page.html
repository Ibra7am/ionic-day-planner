<ion-header>
  <ion-toolbar>
    <ion-title>
      Tasks
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- {{tasks | json}} -->
  <ion-button expand="full" *ngIf="updatedTask" color="secondary" (click)="saveTask()">Save new changes</ion-button>

  <ion-list>
    <ion-item-sliding *ngFor="let task of tasks">
      <ion-item>
        <div class="task">
          <ion-input value="{{task.title}}" [(ngModel)]="task.title" (ngModelChange)="showSaveButton(task)"></ion-input>

          <div class="times">
            <div>
              <ion-item style="display: block;">
                <ion-label>Start time</ion-label>
                <ion-datetime displayFormat="hh:mm A" [(ngModel)]="task.startTime" placeholder="Tap here"
                  (ngModelChange)="updateTimeNeeded(task)"></ion-datetime>
              </ion-item>
            </div>
            -
            <div>
              <ion-item>
                <ion-label>End time</ion-label>
                <ion-datetime displayFormat="hh:mm A" [(ngModel)]="task.endTime" placeholder="Tap here" (ngModelChange)="updateTimeNeeded(task)"></ion-datetime>
              </ion-item>
            </div>
          </div>

          <ion-item>
            <ion-label style="text-align: center">Time needed {{task.timeNeeded}}</ion-label>
          </ion-item>
        </div>

      </ion-item>

      <ion-item-options side="end">
        <button ion-button (click)="deleteTask(task)">
          <ion-icon name="trash"></ion-icon>Delete
        </button>
      </ion-item-options>
    </ion-item-sliding>

  </ion-list>
</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed" (click)="addTask()">
  <ion-fab-button>
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
</ion-fab>